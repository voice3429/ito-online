<!DOCTYPE html>
<html>
<head>
  <meta charset="UTF-8">
  <title>ito Online</title>
  <script src="https://www.gstatic.com/firebasejs/9.22.0/firebase-app-compat.js"></script>
  <script src="https://www.gstatic.com/firebasejs/9.22.0/firebase-database-compat.js"></script>
  <style>
    body { font-family: sans-serif; padding: 20px; }
    input, button { margin: 5px; padding: 5px; }
    .hint { margin: 5px 0; border-bottom: 1px solid #ccc; }
    .secret { color: gray; font-size: 0.9em; }
  </style>
</head>
<body>
  <h1>ito ã‚ªãƒ³ãƒ©ã‚¤ãƒ³</h1>

  <!-- ä¸»å‚¬è€…ãŒãƒ†ãƒ¼ãƒã‚’å…¥åŠ› -->
  <div>
    <h3>ãƒ†ãƒ¼ãƒè¨­å®šï¼ˆä¸»å‚¬è€…ã®ã¿ï¼‰</h3>
    <input id="themeInput" placeholder="ä¾‹ï¼šå¤§ãã•ã€çŸ¥ååº¦ãªã©">
    <button onclick="setTheme()">ãƒ†ãƒ¼ãƒæ±ºå®š</button>
  </div>

  <hr>

  <!-- ãƒ—ãƒ¬ã‚¤ãƒ¤ãƒ¼å‚åŠ ãƒ•ã‚©ãƒ¼ãƒ  -->
  <div>
    <h3>ãƒ—ãƒ¬ã‚¤ãƒ¤ãƒ¼å‚åŠ </h3>
    <input id="nameInput" placeholder="åå‰">
    <button onclick="joinGame()">å‚åŠ </button>
  </div>

  <div id="yourNumber" class="secret"></div>

  <hr>

  <!-- ãƒ’ãƒ³ãƒˆæŠ•ç¨¿ -->
  <div>
    <h3>ãƒ’ãƒ³ãƒˆæŠ•ç¨¿</h3>
    <input id="hintInput" placeholder="ãƒ’ãƒ³ãƒˆ">
    <button onclick="sendHint()">ãƒ’ãƒ³ãƒˆé€ä¿¡</button>
  </div>

  <hr>

  <!-- è¡¨ç¤º -->
  <h2>ç¾åœ¨ã®ãƒ†ãƒ¼ãƒ</h2>
  <div id="themeDisplay">ï¼ˆã¾ã è¨­å®šã•ã‚Œã¦ã„ã¾ã›ã‚“ï¼‰</div>

  <h2>ãƒ—ãƒ¬ã‚¤ãƒ¤ãƒ¼ã®ãƒ’ãƒ³ãƒˆ</h2>
  <div id="hintList"></div>

  <script>
    // ğŸ”¥ Firebaseè¨­å®šï¼ˆã‚ãªãŸã®æƒ…å ±ã§å·®ã—æ›¿ãˆã¦ã­ï¼‰
  const firebaseConfig = { 
  APIã‚­ãƒ¼: "AIzaSyBtoNLxqw_TnTSxdNG7gtb308S0jr5pzpE" ã€ 
  èªè¨¼ãƒ‰ãƒ¡ã‚¤ãƒ³: "ito-online-4348a.firebaseapp.com" ã€ 
  ãƒ‡ãƒ¼ã‚¿ãƒ™ãƒ¼ã‚¹URL : "https://ito-online-4348a-default-rtdb.asia-southeast1.firebasedatabase.app" ã€ 
  ãƒ—ãƒ­ã‚¸ã‚§ã‚¯ãƒˆ ID : "ito-online-4348a" ã€ 
  ã‚¹ãƒˆãƒ¬ãƒ¼ã‚¸ãƒã‚±ãƒƒãƒˆ: "ito-online-4348a.firebasestorage.app" ã€ 
  ãƒ¡ãƒƒã‚»ãƒ¼ã‚¸é€ä¿¡è€…ID : "840014772869" ã€ 
  ã‚¢ãƒ—ãƒªID : "1:840014772869:web:8230edfc917d7a393a47ec" , 
};

    firebase.initializeApp(firebaseConfig);
    const db = firebase.database();

    // ãƒ†ãƒ¼ãƒè¨­å®š
    function setTheme() {
      const theme = document.getElementById('themeInput').value;
      db.ref('theme').set(theme);
    }

    db.ref('theme').on('value', snapshot => {
      document.getElementById('themeDisplay').textContent = snapshot.val() || 'ï¼ˆã¾ã è¨­å®šã•ã‚Œã¦ã„ã¾ã›ã‚“ï¼‰';
    });

    // ãƒ—ãƒ¬ã‚¤ãƒ¤ãƒ¼å‚åŠ 
    let playerName = '';
    function joinGame() {
      playerName = document.getElementById('nameInput').value;
      const number = Math.floor(Math.random() * 100) + 1;
      db.ref('players/' + playerName).set({
        number: number,
        hint: ''
      });
      document.getElementById('yourNumber').textContent = `ã‚ãªãŸã®æ•°å­—ã¯ã€Œ${number}ã€ã§ã™ï¼ˆä»–ã®äººã«ã¯è¦‹ãˆã¾ã›ã‚“ï¼‰`;
    }

    // ãƒ’ãƒ³ãƒˆã‚’é€ä¿¡
    function sendHint() {
      const hint = document.getElementById('hintInput').value;
      db.ref('players/' + playerName + '/hint').set(hint);
    }

    // ãƒ’ãƒ³ãƒˆä¸€è¦§ã‚’è¡¨ç¤º
    db.ref('players').on('value', snapshot => {
      const hints = snapshot.val();
      const list = document.getElementById('hintList');
      list.innerHTML = '';
      for (let name in hints) {
        const p = hints[name];
        const hintText = p.hint ? p.hint : 'ï¼ˆãƒ’ãƒ³ãƒˆæœªå…¥åŠ›ï¼‰';
        list.innerHTML += `<div class="hint"><strong>${name}:</strong> ${hintText}</div>`;
      }
    });
  </script>
</body>
</html>
